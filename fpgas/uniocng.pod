# platform
project.create uniocng
project.selectplatform unioc_ng

# instances
project.addinstance pod_library.adns6010
project.addinstance pod_library.encoder_inc
project.addinstance pod_library.encoder_inc
project.addinstance pod_library.encoder_inc
project.addinstance pod_library.compass

# pin connections 
project.connectpin adns601000.adns_spi.mosi_o unioc_ng.fpga.86
project.connectpin adns601000.adns_spi.miso_i unioc_ng.fpga.92
project.connectpin adns601000.adns_spi.sck_o  unioc_ng.fpga.88
project.connectpin adns601000.adns_spi.cs1_no unioc_ng.fpga.90
project.connectpin adns601000.adns_spi.cs2_no unioc_ng.fpga.94
project.connectpin adns601000.adns_spi.cs3_no unioc_ng.fpga.73
project.connectpin adns601000.adns_spi.adns_reset_o unioc_ng.fpga.75

project.connectpin encoder_inc00.channels.ch_a_i unioc_ng.fpga.4
project.connectpin encoder_inc00.channels.ch_b_i unioc_ng.fpga.8

project.connectpin encoder_inc01.channels.ch_a_i unioc_ng.fpga.9
project.connectpin encoder_inc01.channels.ch_b_i unioc_ng.fpga.7

project.connectpin encoder_inc02.channels.ch_a_i unioc_ng.fpga.3
project.connectpin encoder_inc02.channels.ch_b_i unioc_ng.fpga.143

project.connectpin compass00.pwm.pwm_i unioc_ng.fpga.144

# wrapper connection
project.connectpin atmega_wb8_wrapper00.Address_H.0 unioc_ng.fpga.data_fpga_8
project.connectpin atmega_wb8_wrapper00.Address_H.1 unioc_ng.fpga.data_fpga_9
project.connectpin atmega_wb8_wrapper00.Address_H.2 unioc_ng.fpga.data_fpga_10
project.connectpin atmega_wb8_wrapper00.Address_H.3 unioc_ng.fpga.data_fpga_11
project.connectpin atmega_wb8_wrapper00.Address_H.4 unioc_ng.fpga.data_fpga_12
project.connectpin atmega_wb8_wrapper00.Address_H.5 unioc_ng.fpga.data_fpga_13
project.connectpin atmega_wb8_wrapper00.Address_H.6 unioc_ng.fpga.data_fpga_14

project.connectpin atmega_wb8_wrapper00.DA.0 unioc_ng.fpga.AD_fpga_0
project.connectpin atmega_wb8_wrapper00.DA.1 unioc_ng.fpga.AD_fpga_1
project.connectpin atmega_wb8_wrapper00.DA.2 unioc_ng.fpga.AD_fpga_2
project.connectpin atmega_wb8_wrapper00.DA.3 unioc_ng.fpga.AD_fpga_3
project.connectpin atmega_wb8_wrapper00.DA.4 unioc_ng.fpga.AD_fpga_4
project.connectpin atmega_wb8_wrapper00.DA.5 unioc_ng.fpga.AD_fpga_5
project.connectpin atmega_wb8_wrapper00.DA.6 unioc_ng.fpga.AD_fpga_6
project.connectpin atmega_wb8_wrapper00.DA.7 unioc_ng.fpga.AD_fpga_7

project.connectpin atmega_wb8_wrapper00.ALE unioc_ng.fpga.ALE_3V

project.connectpin atmega_wb8_wrapper00.RD unioc_ng.fpga.RD_fpga

project.connectpin atmega_wb8_wrapper00.WR unioc_ng.fpga.WR_fpga

# bus connections
project.connectbus atmega_wb8_wrapper00.mwb8 adns601000.swb8
project.connectbus atmega_wb8_wrapper00.mwb8 encoder_inc00.swb8
project.connectbus atmega_wb8_wrapper00.mwb8 encoder_inc01.swb8
project.connectbus atmega_wb8_wrapper00.mwb8 encoder_inc02.swb8
project.connectbus atmega_wb8_wrapper00.mwb8 compass00.swb8

# syscon connections
project.addbusclock rstext_syscon00.candr atmega_wb8_wrapper00.mwb8
project.connectpin rstext_syscon00.ext.ext_clk unioc_ng.fpga.CLK0
project.connectpin rstext_syscon00.ext.ext_rst_n unioc_ng.fpga.nRST_fpga

# intercon
project.intercon atmega_wb8_wrapper00.mwb8

# memory mapping 
project.setaddr adns601000.swb8 0x1300
project.setaddr encoder_inc00.swb8 0x1400
project.setaddr encoder_inc01.swb8 0x1500
project.setaddr encoder_inc02.swb8 0x1600
project.setaddr compass00.swb8 0x1700

# top gen.
project.top

# synthesis
project.synthesis.selecttoolchain quartus
project.synthesis.generateproject
project.synthesis.generatepinout
project.synthesis.generatetcl
